/*! iBox v2.0.6 ~ (c) 2013 Max Zhang, https://github.com/maxzhang/ibox2 */
(function(){var t=this,e=Array.prototype.slice,i=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"],n=[],s=function(){},o=function(t){s.prototype=t;var e=new s;return s.prototype=null,e},r=function(t,e){if(t&&e&&"object"==typeof e){var n,s,o;for(n in e)t[n]=e[n];if(i)for(s=i.length;s--;)o=i[s],e.hasOwnProperty(o)&&(t[o]=e[o])}},a=function(){};r(a,{$isClass:!0,extend:function(t){var e,i,n,s=t.prototype;if(i=this.prototype=o(s),this.superclass=i.superclass=s,!t.$isClass){e=a.prototype;for(n in e)n in i&&(i[n]=e[n])}},addStatics:function(t){var e,i;for(i in t)t.hasOwnProperty(i)&&(e=t[i],this[i]=e);return this},addMembers:function(t){var e,n,s,o,r=this.prototype,a=[];for(s in t)a.push(s);for(i&&a.push.apply(a,i),e=0,n=a.length;n>e;e++)s=a[e],t.hasOwnProperty(s)&&(o=t[s],"function"!=typeof o||o.$isClass||(o.$owner=this,o.$name=s),r[s]=o);return this},implement:function(){this.addMembers.apply(this,arguments)}}),r(a.prototype,{$isInstance:!0,callParent:function(t){var i,s=(i=this.callParent.caller)&&(i=i.$owner?i:i.caller)&&i.$owner.superclass[i.$name];return s.apply(this,t?e.call(t,0):n)},constructor:function(){return this}});var d=function(){function t(){return this.constructor.apply(this,arguments)||null}return t},l=function(t,e){var i,n,s,o=a.prototype;if(i=e&&e!==Object?e:a,n=i.prototype,!i.$isClass)for(s in o)n[s]||(n[s]=o[s]);t.extend(i)},h={define:function(t,e){var i,n;t||e?e||(e=t,t=a):(t=a,e={}),i=d();for(n in a)i[n]=a[n];return e.statics&&(i.addStatics(e.statics),delete e.statics),l(i,t),i.addMembers(e),i}};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=h:"function"==typeof define&&(define.amd||seajs)&&define("klass",[],function(){return h}),"object"==typeof t&&"object"==typeof t.document&&(t.Klass=h)})(),function(t){var e=t.navigator,i=e.userAgent,n=i.match(/(Android)[\s\/]+([\d\.]+)/),s=i.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),o=i.match(/(Windows\s+Phone)\s([\d\.]+)/),r=/WebKit\/[\d.]+/i.test(i),a=s?e.standalone?r:/Safari/i.test(i)&&!/CriOS/i.test(i)&&!/MQQBrowser/i.test(i):!1,d={},l=Object.prototype.toString,h=Array.prototype.slice;n&&(d.android=!0,d.version=n[2]),s&&(d.ios=!0,d.version=s[2].replace(/_/g,"."),d.ios7=/^7/.test(d.version),"iPad"===s[1]?d.ipad=!0:"iPhone"===s[1]?(d.iphone=!0,d.iphone5=568==t.screen.height):"iPod"===s[1]&&(d.ipod=!0)),o&&(d.wp=!0,d.version=o[2],d.wp8=/^8/.test(d.version));var c={BLANK_IMAGE:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",os:d,isMobile:function(){return d.ios||d.android||d.wp},isWebkit:r,isSafari:a,noop:function(){},isDefined:function(t){return t!==void 0},isString:function(t){return"string"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isObject:"[object Object]"===l.call(null)?function(t){return null!==t&&void 0!==t&&"[object Object]"===l.call(t)&&void 0===t.ownerDocument}:function(t){return"[object Object]"===l.call(t)},isArray:"isArray"in Array?Array.isArray:function(t){return"[object Array]"===l.call(t)},isFunction:function(t){return"[object Function]"===l.call(t)},proxy:function(t,e){return function(){return t.apply(e,arguments)}},createOrientationChangeProxy:function(e,i){return function(){clearTimeout(i.orientationChangedTimeout);var n=h.call(arguments,0);i.orientationChangedTimeout=setTimeout(c.proxy(function(){var s=t.orientation;s!=i.lastOrientation&&e.apply(i,n),i.lastOrientation=s},i),d.android?300:50)}},removeElement:function(){var t=h.call(arguments,0);t.forEach(function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})},addClass:function(t,e){var i,n,s,o;if(i=(e||"").match(/\S+/g)||[],n=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(/[\t\r\n]/g," "):" ")){for(o=0;s=i[o++];)0>n.indexOf(" "+s+" ")&&(n+=s+" ");t.className=n.trim()}},removeClass:function(t,e){var i,n,s,o;if(i=(e||"").match(/\S+/g)||[],n=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(/[\t\r\n]/g," "):" ")){for(o=0;s=i[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");t.className=n.trim()}},parsePx:function(t){return t?parseInt(t.replace(/[^\d]/g,""),10):0},getComputedSize:function(e,i){var n,s,o,r,a,d,l=t.getComputedStyle(e,null);return c.isDefined(i)?(c.isObject(i)||(i={width:i}),a=i.width,d=i.height,c.isDefined(a)&&(n=a-c.parsePx(l.marginLeft)-c.parsePx(l.marginRight),o=n-c.parsePx(l.paddingLeft)-c.parsePx(l.paddingRight)-c.parsePx(l.borderLeftWidth)-c.parsePx(l.borderRightWidth)),c.isDefined(d)&&(s=d-c.parsePx(l.marginTop)-c.parsePx(l.marginBottom),r=s-c.parsePx(l.paddingTop)-c.parsePx(l.paddingBottom)-c.parsePx(l.borderTopWidth)-c.parsePx(l.borderBottomWidth))):(n=e.offsetWidth,s=e.offsetHeight,o=n-c.parsePx(l.paddingLeft)-c.parsePx(l.paddingRight)-c.parsePx(l.borderLeftWidth)-c.parsePx(l.borderRightWidth),r=s-c.parsePx(l.paddingTop)-c.parsePx(l.paddingBottom)-c.parsePx(l.borderTopWidth)-c.parsePx(l.borderBottomWidth),a=n+c.parsePx(l.marginLeft)+c.parsePx(l.marginRight),d=s+c.parsePx(l.marginTop)+c.parsePx(l.marginBottom)),{width:0>n?0:n,height:0>s?0:s,innerWidth:0>o?0:o,innerHeight:0>r?0:r,outerWidth:0>a?0:a,outerHeight:0>d?0:d}},vendor:function(){var t=document.createElement("div").style,e=function(){for(var e,i="t,webkitT,MozT,msT,OT".split(","),n=0,s=i.length;s>n;n++)if(e=i[n]+"ransform",e in t)return i[n].substr(0,i[n].length-1);return!1}(),i=e?"-"+e.toLowerCase()+"-":"",n=function(t){return""===e?t:(t=t.charAt(0).toUpperCase()+t.substr(1),e+t)},s=n("transform"),o=n("transition"),r=n("transitionProperty"),a=n("transitionDuration"),d=n("transformOrigin"),l=n("transitionTimingFunction"),h=n("transitionDelay"),c=function(){return"webkit"==e||"O"===e?e.toLowerCase()+"TransitionEnd":"transitionend"}();return t=null,{propVendor:e,cssVendor:i,transform:s,transition:o,transitionProperty:r,transitionDuration:a,transformOrigin:d,transitionTimingFunction:l,transitionDelay:h,transitionEndEvent:c}}(),listenTransition:function(t,e,i){var n=this,s=c.vendor.transitionEndEvent,o=function(){t.transitionTimer&&clearTimeout(t.transitionTimer),t.transitionTimer=null,t.removeEventListener(s,r,!1)},r=function(){o(),i&&i.call(n)};o(),t.addEventListener(s,r,!1),t.transitionTimer=setTimeout(r,e+100)},queryFunction:function(e){var i;return e&&c.isString(e)&&(i=t,e=e.split("."),e.forEach(function(t){i=i[t]})),i||c.noop},dispatchClickEvent:function(t){var e,i=t.target;"SELECT"!=i.tagName&&"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName&&(e=document.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,i.screenX,i.screenY,i.clientX,i.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,i.dispatchEvent(e))}};t.iBoxUtils=c}(window),function(t){var e=t.iBoxUtils,i=Array.prototype.slice,n=Klass.define({statics:{version:"2.0.6"},baseCSSPrefix:"ibox",offsets:{top:0,bottom:0},constructor:function(i,n){e.isObject(i)&&(n=i,i=null),i=i||document.body,n=n||{};for(var s in n)this[s]=n[s];this.views={},this.render(i),this.scrollTop(),this.resize();var o=this.body.children[0];o&&this.slide({el:o,silent:!0}),t.addEventListener("resize",this,!1),t.addEventListener("orientationchange",this,!1)},render:function(t){if(!this.rendered){this.rendered=!0;var i=this.baseCSSPrefix,n=this.baseCSSPrefix+"-header",s=this.baseCSSPrefix+"-body";this.el=e.isString(t)?document.querySelector(t):t,e.addClass(this.el,i),this.cls&&e.addClass(this.el,this.cls),this.header=this.el.querySelector("."+n),this.header||(this.header=document.createElement("div"),this.el.appendChild(this.header)),e.addClass(this.header,n),this.headerCls&&e.addClass(this.header,this.headerCls),this.body=this.el.querySelector("."+s),this.body||(this.body=document.createElement("div"),this.el.appendChild(this.body)),e.addClass(this.body,s),this.bodyCls&&e.addClass(this.body,this.bodyCls),this.onRender()}},onRender:e.noop,resize:function(){var i,n,s,o,r,a=t.innerWidth,d=t.innerHeight,l=t.screen.width,h=t.screen.height,c=this.offsets.top,u=this.offsets.bottom,p=a;c=e.isFunction(c)?c():c,u=e.isFunction(u)?u():u,e.isSafari&&!e.os.ios7?(i=t.navigator.standalone?d:(0===t.orientation?h-44:l-32)-20,i=d>i?d:i):i=d,i=i-c-u,(p!=this.lastWidth||i!=this.lastHeight)&&(this.lastWidth=p,this.lastHeight=i,s=e.getComputedSize(this.el,{width:p,height:i}),n=e.getComputedSize(this.header).outerHeight,o=e.getComputedSize(this.header,{width:s.innerWidth,height:n}),r=e.getComputedSize(this.body,{width:s.innerWidth,height:s.innerHeight-n}),this.el.style.cssText="top:"+c+"px;width:"+s.innerWidth+"px;height:"+s.innerHeight+"px;",this.header.style.cssText="top:0px;width:"+o.innerWidth+"px;height:"+o.innerHeight+"px;",this.body.style.cssText="top:"+n+"px;width:"+r.innerWidth+"px;height:"+r.innerHeight+"px;",this.lastView&&!this.sliding&&this.lastView.resize(),this.onResize(s,o,r))},onResize:e.noop,slide:function(t,s,o,r){var a,d=this,l=i.call(arguments,0),h=l.length,c=d.lastView;d.scrollTop(),t&&(2!=h||e.isBoolean(s)||(r=s,s=!1),3!=h||e.isBoolean(o)||(r=o,o=!1),t=e.isString(t)?{id:t}:t,t.id=t.id&&(e.isString(t.id)?t.id:t.id.getAttribute("id")),o=o===!0,s=s===!0,r=r||{},a=d.views[t.id],a||(a=new n.View(d.body,d.header,t),d.views[a.id]=a),c==a||d.sliding||(d.sliding=!0,c?(r.beforeHide&&r.beforeHide(c),c.slide(s,"out",o,function(){r.onHide&&r.onHide(c),c.single!==!0&&(c.destroy(),delete d.views[c.id])})):o=!0,r.beforeShow&&r.beforeShow(a),a.slide(s,"in",o,function(){d.lastView=a,r.onShow&&r.onShow(a),d.sliding=!1,d.resize()})))},scrollTop:function(){e.isSafari&&t.scrollTo(0,1)},onOrientationChanged:function(){this.scrollTop(),this.resize()},handleEvent:function(t){switch(t.type){case"orientationchange":this.onOrientationChanged(t);break;case"resize":this.onResize(t)}},beforeDestroy:e.noop,onDestroy:e.noop,destroy:function(){if(!this.destroyed){this.destroyed=!0,this.beforeDestroy(),t.removeEventListener("orientationchange",this,!1),t.removeEventListener("resize",this,!1);for(var i in this.view)this.views[i].destroy(),delete this.views[i];this.views=this.lastView=null,e.removeElement(this.header,this.body),this.el=this.header=this.body=null,this.onDestroy()}}});(function(){function t(t){for(var e,i=document.querySelector("meta[name=viewport]"),n=i.content,s=n.split(","),o=[],r="width",a=0,d=s.length;d>a;a++)e=s[a].trim().split("="),e[0]==r?o.push(r+"="+t):o.push(e[0]+"="+e[1]);n=o.join(", "),-1==n.indexOf(r+"=")&&(n=r+"="+t+", "+n),i.content=n}!e.os.ios7&&e.os.iphone5?t("320.1"):t("device-width")})(),"function"==typeof define&&(define.amd||seajs)&&define("ibox",[],function(){return n}),t.iBox=n}(window),function(t){var e=t.IScroll,i=t.iBoxUtils,n=Klass.define({statics:{idSeed:1e3},iscroll:{scrollX:!1,scrollY:!0,preventDefault:!0,click:!0},constructor:function(t,e,i){i=i||{};for(var n in i)this[n]=i[n];this.headerKlass=this.headerKlass||iBox.GeneralHeader,this.ct=t,this.headerCt=e,this.render()},makeId:function(){return"ibox-view-gen"+ ++n.idSeed},render:function(){this.rendered||(this.rendered=!0,this.el?(this.el=i.isString(this.el)?document.querySelector(this.el):this.el,this.scroller=this.el.children[0],this.id=this.el.getAttribute("id"),this.single="false"!==this.el.getAttribute("data-single"),this.onRender=i.queryFunction(this.el.getAttribute("data-render"))):(this.el=document.createElement("div"),this.scroller=document.createElement("div"),this.el.appendChild(this.scroller),this.el.style.cssText="display:none;",this.ct.appendChild(this.el)),this.id||(this.id=this.makeId()),i.addClass(this.scroller,"scroller"),this.el.setAttribute("id",this.id),i.addClass(this.el,"ibox-view"),this.cls&&i.addClass(this.el,this.cls),i.isString(this.header)&&(this.header={title:this.header}),this.header=new this.headerKlass(this.id,this.headerCt,this.header),this.iscroll!==!1&&e&&(this.iscroll=new e(this.el,this.iscroll)),this.onRender())},onRender:i.noop,slide:function(t,e,n,s){var o,r,a,d,l=this,h=l.ct,c=l.el,u=i.vendor.cssVendor,p=i.getComputedSize(h),f=i.getComputedSize(c,{width:p.outerWidth,height:p.outerHeight}),y=1,m=80,g=350,v=50;l.header.slide(t,e,n),("in"==e&&!t||"out"==e&&t)&&(y=2,a="-5px 0 20px #dddddd"),r="display:block;z-index:"+y+";opacity:"+("in"==e?1:.7)+";"+u+"box-shadow:"+a+";width:"+f.innerWidth+"px;height:"+f.innerHeight+"px;"+u+"transform:translate3d("+("in"==e?"0":t?p.width:-m)+"px,0px,0px);"+(n===!0?"":u+"transition:"+u+"transform "+g+"ms,opacity "+g+"ms;"),d=function(){"in"!=e&&c?c.style.display="none":"in"==e&&l.iscroll&&l.iscroll.refresh(),s&&s.call(l,f),l.onSlide()},n!==!0?("in"==e&&(o="display:block;z-index:"+y+";opacity:"+(t?.5:1)+";"+u+"box-shadow:"+a+";width:"+f.innerWidth+"px;height:"+f.innerHeight+"px;"+u+"transform:translate3d("+(t?-m:p.width)+"px,0px,0px);",c.style.cssText=o),i.listenTransition(c,g+v,d),setTimeout(function(){c.style.cssText=r},v)):(c.style.cssText=r,d())},onSlide:i.noop,resize:function(){var t=this;t.slide(!1,"in",!0,function(e){t.onResize(e)})},onResize:i.noop,destroy:function(){this.destroyed||(this.destroyed=!0,this.beforeDestroy(),this.header.destroy(),this.header=null,this.iscroll&&(this.iscroll.destroy(),this.iscroll=null),i.removeElement(this.el),this.el=this.ct=this.headerCt=null,this.onDestroy())},beforeDestroy:i.noop,onDestroy:i.noop});iBox.View=n}(window),function(t){var e=t.iBoxUtils;iBox.Header=Klass.define({constructor:function(t,e,i){i=i||{};for(var n in i)this[n]=i[n];this.viewId=t,this.ct=e,this.render()},render:function(){this.rendered||(this.rendered=!0,this.doRender(),this.onRender())},doRender:e.noop,onRender:e.noop,slide:function(t,e,i,n){var s=this;s.doSlide(t,e,i,function(){n&&n.call(s),s.onSlide()})},doSlide:e.noop,onSlide:e.noop,resize:function(){var t=this;t.slide(!1,"in",!0,function(e){t.onResize(e)})},onResize:e.noop,destroy:function(){this.destroyed||(this.destroyed=!0,this.beforeDestroy(),this.doDestroy(),this.ct=null,this.onDestroy())},doDestroy:e.noop,beforeDestroy:e.noop,onDestroy:e.noop})}(window),function(t){var e=t.navigator.msPointerEnabled,i={start:e?"MSPointerDown":"touchstart",move:e?"MSPointerMove":"touchmove",end:e?"MSPointerUp":"touchend"},n=t.iBoxUtils;iBox.GeneralHeader=Klass.define(iBox.Header,{doRender:function(){var t,e=this.title;e?(e=n.isString(e)?{text:e}:e,t=document.createElement("div"),t.innerHTML="<div>"+e.text+"</div>",t.className="button title"+(e.cls?" "+e.cls:""),t.setAttribute("data-view",this.viewId),t.style.cssText="display:none;",this.ct.appendChild(t),this.title=t,t=null):this.title=this.ct.querySelector('div.title[data-view="'+this.id+'"]'),this.renderButton(this.leftButton,!0),this.renderButton(this.rightButton,!1)},renderButton:function(t,e){var s,o,r,a=this,d=e?"left":"right";t?(t=n.isString(t)?{text:t}:t,o=t.handler,s=document.createElement("div"),s.innerHTML=(e?'<img src="'+(t.icon||n.BLANK_IMAGE+'" class="back"')+" />":"")+"<div>"+t.text+"</div>",s.className="button "+d+(t.cls?" "+t.cls:""),s.style.cssText="display:none;",s.setAttribute("data-view",a.viewId),a.ct.appendChild(s),a[d+"Button"]=r=s,s=null):(a[d+"Button"]=r=a.ct.querySelector("div."+d+'[data-view="'+a.id+'"]'),r&&(o=n.queryFunction(r.getAttribute("data-handler")))),o&&(r.clickHandler=o,n.isMobile()&&(r.addEventListener(i.start,this,!1),r.addEventListener(i.end,this,!1)),r.addEventListener("click",this,!1))},onButtonTouchStart:function(t){var e=t.currentTarget;clearTimeout(e.highlightTimeout),n.addClass(e,"highlighted")},onButtonTouchEnd:function(t){n.dispatchClickEvent(t)},onButtonClick:function(t){var e=t.currentTarget;e.highlightTimeout=setTimeout(function(){n.removeClass(e,"highlighted")},300),e.clickHandler&&e.clickHandler()},doSlide:function(t,e,i,s){var o,r,a,d,l,h,c,u,p,f,y,m,g,v,x,b=this,w=n.vendor.cssVendor,T=t?"right":"left",S=b.leftButton,C=b.rightButton,A=b.title,E=n.getComputedSize(b.ct).innerWidth,P=70,B=350,k=300,z=50;"in"==e&&(S&&(S.style.cssText="display:block;"+w+"transform:translate3d(-1000px,-1000px,0px);"),C&&(C.style.cssText="display:block;"+w+"transform:translate3d(-1000px,-1000px,0px);"),A&&(A.style.cssText="display:block;"+w+"transform:translate3d(-1000px,-1000px,0px);")),a=S?n.getComputedSize(S).outerWidth:0,d=C?n.getComputedSize(C).outerWidth:0,r=A?n.getComputedSize(A).outerWidth:0,a+d+r>E&&(a=E-r-d),P>a&&(a=P),l=(E-r)/2,l=l+r+d>E?(E-r-d)/2:l,l=a>l?a:l,S&&(n.removeClass(S,"highlighted"),o=S.querySelector("div"),h=n.getComputedSize(S,a).innerWidth,c=n.getComputedSize(o,h).innerWidth,m="display:block;width:"+h+"px;opacity:"+("in"==e?"1":"0")+";"+(i===!0?"":w+"transition:"+"opacity "+k+"ms;"),g="width:"+c+"px;"+w+"transform:translate3d("+("in"==e?0:"left"==T?-a:l)+"px,0px,0px);"+(i===!0?"":""+w+"transition:"+w+"transform "+B+"ms;"),i!==!0?("in"==e&&(u="display:block;width:"+h+"px;opacity:0;",p="width:"+c+"px;"+w+"transform:translate3d("+("left"==T?l:-a)+"px,0px,0px);",S.style.cssText=u,o.style.cssText=p),n.listenTransition(S,B+z,function(){"in"!=e&&b.leftButton&&(b.leftButton.style.display="none")}),setTimeout(function(){S.style.cssText=m,o.style.cssText=g},z)):(S.style.cssText=m,o.style.cssText=g,"in"!=e&&(S.style.display="none"))),C&&(n.removeClass(C,"highlighted"),v="display:block;opacity:"+("in"==e?"1":"0")+";"+(i===!0?"":w+"transition:opacity "+k+"ms;"),i!==!0?("in"==e&&(f="display:block;opacity:0;",C.style.cssText=f),n.listenTransition(C,B+z,function(){"in"!=e&&b.rightButton&&(b.rightButton.style.display="none")}),setTimeout(function(){C.style.cssText=v},z)):(C.style.cssText=v,"in"!=e&&(C.style.display="none"))),A&&(x="display:block;opacity:"+("in"==e?"1":"0")+";"+w+"transform:translate3d("+("in"==e?l:"left"==T?30:E)+"px,0px,0px);"+(i===!0?"":w+"transition:"+w+"transform "+B+"ms,opacity "+k+"ms;"),i!==!0?("in"==e&&(y="display:block;opacity:0;"+w+"transform:translate3d("+("left"==T?E-r/2:0)+"px,0px,0px);",A.style.cssText=y),n.listenTransition(A,B+z,function(){"in"!=e&&b.title&&(b.title.style.display="none"),s&&s.call(b)}),setTimeout(function(){A.style.cssText=x},z)):(A.style.cssText=x,"in"!=e&&(A.style.display="none"),s&&s.call(b)))},handleEvent:function(t){switch(t.type){case i.start:this.onButtonTouchStart(t);break;case i.end:this.onButtonTouchEnd(t);break;case"click":this.onButtonClick(t)}},doDestroy:function(){this.title&&(n.removeElement(this.title),this.title=null),this.destroyButton(!0),this.destroyButton(!1)},destroyButton:function(t){var e=t?"left":"right",s=this[e+"Button"];s&&(n.isMobile()&&(s.removeEventListener(i.start,this,!1),s.removeEventListener(i.end,this,!1)),s.removeEventListener("click",this,!1),n.removeElement(s),this[e+"Button"]=s=null)}})}(window);